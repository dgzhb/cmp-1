(function(e,t){"use strict";var n=document.getElementsByTagName("SCRIPT")[0],r=/MSIE/.test(navigator.userAgent),i=function(){var e=document.createElement("SCRIPT");return e.async=!0,"async"in e}(),s=0,o=0,u=function(t){var s=document.createElement("script"),o=!1;s.type="text/javascript",i&&!r&&(s.async=!1),s.defer=!1,s.className="lazyloadlight",s.onload=s.onreadystatechange=function(){var e=s.readyState;o===!1&&(!e||e=="loaded"||e=="complete"||e=="uninitialized")&&(s.onload=s.onreadystatechange=null,a(t),o=!0)},s.src=t.sFileName,n.parentNode.insertBefore(s,n)},a=function(t){d[t.sFileName]=1,p[t.iPackId].current++,f(t.iPackId),c()},f=function(n){p[n].current===p[n].total&&p[n].callback&&(p[n].callback.call(t),delete p[n].callback)},l=!1,c=function b(){l=!0;var e=h.shift();if(e===undefined){l=!1;return}if(d[e.sFileName]===1)p[e.iPackId].current++,f(e.iPackId),b();else{if(d[e.sFileName]===0)return!1;if(d[e.sFileName]!==-1)throw new Error("sorry ?");d[e.sFileName]=0,u(e)}},h=[],p={},d={},v="",m=/^http|\/\//,g=0,y=document.createElement("a");e.lazyLoadLight=function(t,n){var r,i,s;g++;for(var o=0,u=t.length;o<u;o++)y.href=t[o],r=y.href.toString(),r=r.match(m)?r:v+r,h.push({iPackId:g,sFileName:r}),r in d||(d[r]=-1);p[g]={total:u,current:0,callback:n},l===!1&&c()},e.lazyLoadLight.setBasePath=function(e){v=e}})(window.YOUR_NAMESPACE || this,this);
